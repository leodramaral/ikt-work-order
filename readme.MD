# Work Order

# üìã Documenta√ß√£o da API - Work Order System

## üèóÔ∏è Vis√£o Geral da Arquitetura

Esta API foi desenvolvida seguindo os princ√≠pios da **Clean Architecture** (Arquitetura Limpa), com forte separa√ß√£o de responsabilidades e alta testabilidade.

### Stack Tecnol√≥gica
- **Runtime**: Node.js com TypeScript
- **Framework Web**: Express.js
- **ORM**: TypeORM
- **Banco de Dados**: PostgreSQL
- **Testes**: Jest + ts-jest
- **Build Tools**: ts-node
- **Frontend**: React + Vite + Chakra UI
- **Containeriza√ß√£o**: Docker + Docker Compose

---

## üê≥ Execu√ß√£o com Docker (RECOMENDADO)

A forma mais f√°cil de rodar toda a aplica√ß√£o (Frontend + API + PostgreSQL) √© usando Docker.

### **Pr√©-requisitos**
- Docker (vers√£o 20.10 ou superior)
- Docker Compose (vers√£o 2.0 ou superior)

### **Iniciar a Aplica√ß√£o**

Na raiz do projeto:

```bash
docker compose up --build
```

**O que acontece:**
- ‚úÖ Inicia PostgreSQL na porta `5432`
- ‚úÖ Executa automaticamente as migrations do TypeORM
- ‚úÖ Inicia a API na porta `3000`
- ‚úÖ Inicia o Frontend na porta `5173`

### **Acessar a Aplica√ß√£o**

- **Frontend**: http://localhost:5173
- **API**: http://localhost:3000
- **PostgreSQL**: localhost:5432

### **Rodar em Segundo Plano**

```bash
docker compose up -d
```

Ver logs:
```bash
docker compose logs -f
docker compose logs -f api
docker compose logs -f app
```

### **Comandos √öteis**

```bash
# Parar containers
docker compose down

# Executar migrations manualmente
docker exec -it ikt-work-order-api npm run migration:run

# Reverter √∫ltima migration
docker exec -it ikt-work-order-api npm run migration:revert
```

---

## üß™ Testando a API

### **Usando VS Code com REST Client**

1. Instale a extens√£o **REST Client** no VS Code
2. Abra o arquivo `api.http` na raiz do projeto
3. Clique em "Send Request" acima de cada endpoint

### **Usando cURL**

```bash
# Cadastrar usu√°rio
curl -X POST http://localhost:3000/signup \
  -H "Content-Type: application/json" \
  -d '{"name":"Leandro","email":"le.amaral@outlook.com","password":"123456"}'

# Listar tarefas
curl http://localhost:3000/tasks

# Listar ordens de trabalho
curl http://localhost:3000/work-orders
```

---

## üöÄ Execu√ß√£o Sem Docker

### **Pr√©-requisitos**
- Node.js 20+
- PostgreSQL 15+

### **Iniciar o Banco de Dados**
```bash
# Instalar e iniciar PostgreSQL
# Criar banco: ikt_work_order
# Usu√°rio: admin
# Senha: password
```

### **Iniciar a API**
```bash
cd api
npm install
npm run migration:run  # Executar migrations
npm start
```

### **Iniciar o Frontend**
```bash
cd app
npm install
npm run dev
```

### **Executar Testes**
```bash
cd api
npm test
```

---
